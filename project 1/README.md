# SM4 软件实现的优化 README

## 概述
SM4 是一种对称密钥块密码，操作于 128 位的数据块上。
## 1. T-table 优化

使用 T-table（查找表）是加速块密码加密过程的常用技术。通过预先计算加密过程中所需的值并将其存储在 T-table 中，我们可以显著减少每轮加密的计算开销。

### 数学公式
变换函数定义为：
L(x) = x ⊕ rotl(x, 2) ⊕ rotl(x, 10) ⊕ rotl(x, 18) ⊕ rotl(x, 24)
每个字节计算：
T[b] = L(S[b])
其中是 S-box 中字节 \\( b \\) 的值。这种优化显著减少了加密过程中每一轮的计算开销。

## 2. 利用 AES-NI 指令集

AES-NI 指令集包含硬件指令以加速 AES 操作，尽管 SM4 并不直接使用 AES-NI，但可以调整某些操作以利用类似的效率提升。

### 数学影响
使用硬件级指令可以实现：
- 多个字节的并行处理。
- 基本操作（如 XOR 和移位）所需的时钟周期减少。

## 3. 高级指令集（GFNI、VPROLD）

最新的指令集，如 GFNI（Galois Field New Instructions）和 VPROLD（Vector Permute Left），可以提供进一步的优化：

- **GFNI**：此指令集可用于涉及 Galois 域的操作，这与某些加密和解密过程相关。
- **VPROLD**：此指令集允许高效的矢量左移操作，可以替代 SM4 中的传统 rotl 操作。

## 结论
通过结合以上优化方法，SM4 的性能得以显著提升。这些优化不仅减少了计算开销，还提升了整体加密效率，为实际应用中的安全性和性能提供了良好的平衡。
